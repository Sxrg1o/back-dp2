{
  "summary": {
    "total_tests": 10,
    "working": 6,
    "failing": 4,
    "success_rate": 60.0,
    "start_time": "2025-09-18T14:13:36.845116",
    "end_time": "2025-09-18T14:13:36.950477",
    "duration_seconds": 0.105361
  },
  "known_issues": {
    "ingredient_routes": {
      "description": "Rutas espec√≠ficas de ingredientes fallan (422)",
      "affected_endpoints": [
        "/ingredientes/verduras",
        "/ingredientes/carnes",
        "/ingredientes/frutas",
        "/ingredientes/low-stock"
      ],
      "cause": "FastAPI interpreta rutas espec√≠ficas como par√°metros de ruta gen√©rica",
      "solution": "Reordenar rutas: espec√≠ficas antes que gen√©ricas",
      "status": "fixed_in_code"
    },
    "pydantic_validation": {
      "description": "Validaci√≥n Pydantic falla en endpoints de √≠tems (500)",
      "affected_endpoints": [
        "/items/",
        "/items/filter/price",
        "/items/filter/etiqueta/SIN_GLUTEN"
      ],
      "cause": "Campo 'tipo' faltante en entidades de dominio para DTOs",
      "solution": "Agregar campo 'tipo' din√°mico en m√©todo to_domain()",
      "status": "fixed_in_code"
    },
    "duplicate_data": {
      "description": "Error de datos duplicados en seed-data (500)",
      "affected_endpoints": [
        "/seed-data"
      ],
      "cause": "Constraint de unicidad falla al insertar datos existentes",
      "solution": "Manejar graciosamente datos duplicados",
      "status": "fixed_in_code"
    }
  },
  "working_endpoints": [
    {
      "endpoint": "/health",
      "method": "GET",
      "description": "Health Check",
      "status_code": 200,
      "expected_status": 200,
      "response_time_ms": 5.0,
      "success": true,
      "url": "http://localhost:8002/health",
      "timestamp": "2025-09-18T14:13:36.865114",
      "known_issue": null,
      "response_data": {
        "status": "healthy",
        "service": "menu-ms",
        "version": "1.0.0",
        "message": "Microservicio de Men√∫ y Carta funcionando correctamente"
      },
      "data_type": "JSON",
      "data_size": 133,
      "status": "‚úÖ √âXITO"
    },
    {
      "endpoint": "/",
      "method": "GET",
      "description": "Root endpoint",
      "status_code": 200,
      "expected_status": 200,
      "response_time_ms": 3.01,
      "success": true,
      "url": "http://localhost:8002/",
      "timestamp": "2025-09-18T14:13:36.868120",
      "known_issue": null,
      "response_data": {
        "message": "üçΩÔ∏è API de Men√∫ y Carta funcionando üöÄ",
        "service": "menu-ms",
        "version": "1.0.0",
        "docs": "/docs",
        "health": "/health"
      },
      "data_type": "JSON",
      "data_size": 131,
      "status": "‚úÖ √âXITO"
    },
    {
      "endpoint": "/info",
      "method": "GET",
      "description": "Informaci√≥n del servicio",
      "status_code": 200,
      "expected_status": 200,
      "response_time_ms": 3.0,
      "success": true,
      "url": "http://localhost:8002/info",
      "timestamp": "2025-09-18T14:13:36.872115",
      "known_issue": null,
      "response_data": {
        "service": "menu-ms",
        "version": "1.0.0",
        "description": "Microservicio de Men√∫ y Carta para el restaurante Dom√≥tica",
        "features": [
          "Gesti√≥n de platos (entradas, principales, postres)",
          "Gesti√≥n de bebidas (alcoh√≥licas y no alcoh√≥licas)",
          "Control de ingredientes e inventario",
          "Informaci√≥n nutricional completa",
          "Sistema de etiquetas y filtros",
          "B√∫squeda avanzada",
          "Arquitectura hexagonal"
        ],
        "endpoints": {
          "items": "/items/",
          "ingredientes": "/ingredientes/",
          "health": "/health",
          "docs": "/docs"
        },
        "database": "SQLite (desarrollo) / PostgreSQL (producci√≥n)"
      },
      "data_type": "JSON",
      "data_size": 565,
      "status": "‚úÖ √âXITO"
    },
    {
      "endpoint": "/ingredientes/",
      "method": "GET",
      "description": "Listar ingredientes",
      "status_code": 200,
      "expected_status": 200,
      "response_time_ms": 7.59,
      "success": true,
      "url": "http://localhost:8002/ingredientes/",
      "timestamp": "2025-09-18T14:13:36.879709",
      "known_issue": null,
      "response_data": [
        {
          "nombre": "Aj√≠ Amarillo",
          "stock": "15.000",
          "peso": "0.050",
          "tipo": "VERDURA",
          "id": 1
        },
        {
          "nombre": "Aj√≠ Panca",
          "stock": "10.000",
          "peso": "0.040",
          "tipo": "VERDURA",
          "id": 2
        },
        {
          "nombre": "Rocoto",
          "stock": "8.000",
          "peso": "0.030",
          "tipo": "VERDURA",
          "id": 3
        },
        {
          "nombre": "Cebolla Morada",
          "stock": "20.000",
          "peso": "0.200",
          "tipo": "VERDURA",
          "id": 4
        },
        {
          "nombre": "Culantro",
          "stock": "12.000",
          "peso": "0.010",
          "tipo": "VERDURA",
          "id": 5
        },
        {
          "nombre": "Ajo",
          "stock": "15.000",
          "peso": "0.020",
          "tipo": "VERDURA",
          "id": 6
        },
        {
          "nombre": "Lim√≥n",
          "stock": "25.000",
          "peso": "0.120",
          "tipo": "FRUTA",
          "id": 7
        },
        {
          "nombre": "Papa Amarilla",
          "stock": "30.000",
          "peso": "0.300",
          "tipo": "VERDURA",
          "id": 8
        },
        {
          "nombre": "Camote",
          "stock": "22.000",
          "peso": "0.350",
          "tipo": "VERDURA",
          "id": 9
        },
        {
          "nombre": "Ma√≠z Morado",
          "stock": "18.000",
          "peso": "0.300",
          "tipo": "FRUTA",
          "id": 10
        },
        {
          "nombre": "Choclo",
          "stock": "18.000",
          "peso": "0.250",
          "tipo": "VERDURA",
          "id": 11
        },
        {
          "nombre": "Arroz",
          "stock": "40.000",
          "peso": "1.000",
          "tipo": "VERDURA",
          "id": 12
        },
        {
          "nombre": "Habas",
          "stock": "12.000",
          "peso": "0.200",
          "tipo": "VERDURA",
          "id": 13
        },
        {
          "nombre": "Zapallo",
          "stock": "10.000",
          "peso": "0.500",
          "tipo": "VERDURA",
          "id": 14
        },
        {
          "nombre": "Cebollita China",
          "stock": "6.000",
          "peso": "0.050",
          "tipo": "VERDURA",
          "id": 15
        },
        {
          "nombre": "Kion",
          "stock": "6.000",
          "peso": "0.050",
          "tipo": "VERDURA",
          "id": 16
        },
        {
          "nombre": "Pollo Criollo",
          "stock": "15.000",
          "peso": "1.200",
          "tipo": "CARNE",
          "id": 17
        },
        {
          "nombre": "Carne de Res",
          "stock": "12.000",
          "peso": "1.000",
          "tipo": "CARNE",
          "id": 18
        },
        {
          "nombre": "Pescado de Mar",
          "stock": "12.000",
          "peso": "0.600",
          "tipo": "CARNE",
          "id": 19
        },
        {
          "nombre": "Camar√≥n",
          "stock": "10.000",
          "peso": "0.300",
          "tipo": "CARNE",
          "id": 20
        },
        {
          "nombre": "Calamar",
          "stock": "8.000",
          "peso": "0.400",
          "tipo": "CARNE",
          "id": 21
        },
        {
          "nombre": "L√∫cuma",
          "stock": "8.000",
          "peso": "0.200",
          "tipo": "FRUTA",
          "id": 22
        },
        {
          "nombre": "Chirimoya",
          "stock": "6.000",
          "peso": "0.300",
          "tipo": "FRUTA",
          "id": 23
        },
        {
          "nombre": "Maracuy√°",
          "stock": "7.000",
          "peso": "0.150",
          "tipo": "FRUTA",
          "id": 24
        }
      ],
      "data_type": "JSON",
      "data_size": 2113,
      "status": "‚úÖ √âXITO"
    },
    {
      "endpoint": "/items/with-ingredientes",
      "method": "GET",
      "description": "√çtems con ingredientes",
      "status_code": 200,
      "expected_status": 200,
      "response_time_ms": 23.0,
      "success": true,
      "url": "http://localhost:8002/items/with-ingredientes",
      "timestamp": "2025-09-18T14:13:36.903708",
      "known_issue": null,
      "response_data": [
        {
          "valor_nutricional": "Rico en prote√≠nas, omega-3 y vitamina C",
          "precio": "28.0",
          "tiempo_preparacion": "20.0",
          "comentarios": "Plato bandera del Per√∫, pescado fresco marinado en leche de tigre",
          "receta": "Cortar pescado fresco, marinar en lim√≥n, aj√≠, cebolla morada y culantro",
          "disponible": true,
          "unidades_disponibles": 15,
          "num_ingredientes": 7,
          "kcal": 250,
          "calorias": "250.0",
          "proteinas": "30.0",
          "azucares": "5.0",
          "descripcion": "Ceviche de Pescado",
          "etiquetas": [
            "ACIDO",
            "FRIO",
            "SIN_GLUTEN"
          ],
          "ingredientes_ids": [],
          "id": 1,
          "tipo": "PLATO",
          "ingredientes": [
            {
              "id": 4,
              "nombre": "Cebolla Morada",
              "tipo": "VERDURA",
              "cantidad": "1"
            },
            {
              "id": 5,
              "nombre": "Culantro",
              "tipo": "VERDURA",
              "cantidad": "1"
            },
            {
              "id": 7,
              "nombre": "Lim√≥n",
              "tipo": "FRUTA",
              "cantidad": "1"
            },
            {
              "id": 19,
              "nombre": "Pescado de Mar",
              "tipo": "CARNE",
              "cantidad": "1"
            }
          ]
        },
        {
          "valor_nutricional": "Alto en prote√≠nas, carbohidratos y vitaminas",
          "precio": "32.5",
          "tiempo_preparacion": "25.0",
          "comentarios": "Fusi√≥n peruano-china, lomo de res salteado con verduras",
          "receta": "Saltear lomo con cebolla, tomate, aj√≠ amarillo, servir con papas fritas y arroz",
          "disponible": true,
          "unidades_disponibles": 10,
          "num_ingredientes": 8,
          "kcal": 580,
          "calorias": "580.0",
          "proteinas": "35.0",
          "azucares": "12.0",
          "descripcion": "Lomo Saltado",
          "etiquetas": [
            "CALIENTE",
            "CON_GLUTEN"
          ],
          "ingredientes_ids": [],
          "id": 2,
          "tipo": "PLATO",
          "ingredientes": [
            {
              "id": 1,
              "nombre": "Aj√≠ Amarillo",
              "tipo": "VERDURA",
              "cantidad": "2"
            },
            {
              "id": 4,
              "nombre": "Cebolla Morada",
              "tipo": "VERDURA",
              "cantidad": "2"
            },
            {
              "id": 8,
              "nombre": "Papa Amarilla",
              "tipo": "VERDURA",
              "cantidad": "2"
            },
            {
              "id": 12,
              "nombre": "Arroz",
              "tipo": "VERDURA",
              "cantidad": "2"
            },
            {
              "id": 18,
              "nombre": "Carne de Res",
              "tipo": "CARNE",
              "cantidad": "2"
            }
          ]
        },
        {
          "valor_nutricional": "Rica en carbohidratos, prote√≠nas y vitaminas A y C",
          "precio": "18.5",
          "tiempo_preparacion": "30.0",
          "comentarios": "Plato tradicional de la gastronom√≠a peruana",
          "receta": "Cocinar papa amarilla, hacer pur√©, mezclar con aj√≠ amarillo, rellenar con pollo deshilachado",
          "disponible": true,
          "unidades_disponibles": 12,
          "num_ingredientes": 6,
          "kcal": 320,
          "calorias": "320.0",
          "proteinas": "18.0",
          "azucares": "8.0",
          "descripcion": "Causa Lime√±a de Pollo",
          "etiquetas": [
            "FRIO",
            "SIN_GLUTEN"
          ],
          "ingredientes_ids": [],
          "id": 3,
          "tipo": "PLATO",
          "ingredientes": [
            {
              "id": 1,
              "nombre": "Aj√≠ Amarillo",
              "tipo": "VERDURA",
              "cantidad": "3"
            },
            {
              "id": 8,
              "nombre": "Papa Amarilla",
              "tipo": "VERDURA",
              "cantidad": "3"
            },
            {
              "id": 17,
              "nombre": "Pollo Criollo",
              "tipo": "CARNE",
              "cantidad": "3"
            }
          ]
        },
        {
          "valor_nutricional": "Rico en az√∫cares y grasas",
          "precio": "12.0",
          "tiempo_preparacion": "30.0",
          "comentarios": "Postre tradicional de Lima, manjar blanco con merengue",
          "receta": "Preparar manjar blanco, cubrir con merengue italiano, espolvorear canela",
          "disponible": true,
          "unidades_disponibles": 10,
          "num_ingredientes": 5,
          "kcal": 380,
          "calorias": "380.0",
          "proteinas": "8.0",
          "azucares": "45.0",
          "descripcion": "Suspiro a la Lime√±a",
          "etiquetas": [
            "CON_GLUTEN",
            "FRIO"
          ],
          "ingredientes_ids": [],
          "id": 4,
          "tipo": "PLATO",
          "ingredientes": [
            {
              "id": 22,
              "nombre": "L√∫cuma",
              "tipo": "FRUTA",
              "cantidad": "4"
            }
          ]
        },
        {
          "valor_nutricional": "Rica en antioxidantes y vitamina C",
          "precio": "6.5",
          "tiempo_preparacion": "15.0",
          "comentarios": "Bebida tradicional de ma√≠z morado",
          "receta": "Cocinar ma√≠z morado con canela y clavo, endulzar y servir fr√≠o",
          "disponible": true,
          "unidades_disponibles": 25,
          "num_ingredientes": 3,
          "kcal": 120,
          "calorias": "120.0",
          "proteinas": "1.0",
          "azucares": "28.0",
          "descripcion": "Chicha Morada",
          "etiquetas": [
            "FRIO",
            "SIN_GLUTEN"
          ],
          "ingredientes_ids": [],
          "id": 5,
          "tipo": "BEBIDA",
          "ingredientes": []
        },
        {
          "valor_nutricional": "Fermentado tradicional",
          "precio": "7.5",
          "tiempo_preparacion": "0.0",
          "comentarios": "Bebida andina",
          "receta": "Fermentar ma√≠z de jora",
          "disponible": true,
          "unidades_disponibles": 12,
          "num_ingredientes": 2,
          "kcal": 120,
          "calorias": "120.0",
          "proteinas": "1.5",
          "azucares": "10.0",
          "descripcion": "Chicha de Jora",
          "etiquetas": [
            "FRIO"
          ],
          "ingredientes_ids": [],
          "id": 6,
          "tipo": "BEBIDA",
          "ingredientes": [
            {
              "id": 10,
              "nombre": "Ma√≠z Morado",
              "tipo": "FRUTA",
              "cantidad": "6"
            }
          ]
        },
        {
          "valor_nutricional": "C√≥ctel nacional del Per√∫",
          "precio": "18.0",
          "tiempo_preparacion": "8.0",
          "comentarios": "C√≥ctel emblem√°tico con pisco, lim√≥n y clara de huevo",
          "receta": "Mezclar pisco, jugo de lim√≥n, jarabe de goma y clara de huevo, batir con hielo",
          "disponible": true,
          "unidades_disponibles": 15,
          "num_ingredientes": 5,
          "kcal": 200,
          "calorias": "200.0",
          "proteinas": "2.0",
          "azucares": "8.0",
          "descripcion": "Pisco Sour",
          "etiquetas": [
            "ACIDO",
            "FRIO"
          ],
          "ingredientes_ids": [],
          "id": 7,
          "tipo": "BEBIDA",
          "ingredientes": []
        },
        {
          "valor_nutricional": "Bebida gaseosa con sabor a hierba luisa",
          "precio": "4.5",
          "tiempo_preparacion": "0.0",
          "comentarios": "La bebida nacional del Per√∫",
          "receta": "Servir fr√≠a",
          "disponible": true,
          "unidades_disponibles": 30,
          "num_ingredientes": 1,
          "kcal": 150,
          "calorias": "150.0",
          "proteinas": "0.0",
          "azucares": "35.0",
          "descripcion": "Inca Kola",
          "etiquetas": [
            "FRIO"
          ],
          "ingredientes_ids": [],
          "id": 8,
          "tipo": "BEBIDA",
          "ingredientes": []
        }
      ],
      "data_type": "JSON",
      "data_size": 5222,
      "status": "‚úÖ √âXITO"
    },
    {
      "endpoint": "/items/1",
      "method": "GET",
      "description": "Obtener √≠tem por ID",
      "status_code": 200,
      "expected_status": 200,
      "response_time_ms": 8.0,
      "success": true,
      "url": "http://localhost:8002/items/1",
      "timestamp": "2025-09-18T14:13:36.912709",
      "known_issue": null,
      "response_data": {
        "valor_nutricional": "Rico en prote√≠nas, omega-3 y vitamina C",
        "precio": "28.00",
        "tiempo_preparacion": "20.00",
        "comentarios": "Plato bandera del Per√∫, pescado fresco marinado en leche de tigre",
        "receta": "Cortar pescado fresco, marinar en lim√≥n, aj√≠, cebolla morada y culantro",
        "disponible": true,
        "unidades_disponibles": 15,
        "num_ingredientes": 7,
        "kcal": 250,
        "calorias": "250.00",
        "proteinas": "30.00",
        "azucares": "5.00",
        "descripcion": "Ceviche de Pescado",
        "etiquetas": [
          "FRIO",
          "ACIDO",
          "SIN_GLUTEN"
        ],
        "ingredientes_ids": [],
        "id": 1,
        "tipo": "FONDO"
      },
      "data_type": "JSON",
      "data_size": 564,
      "status": "‚úÖ √âXITO"
    }
  ],
  "failing_endpoints": [
    {
      "endpoint": "/ingredientes/verduras",
      "method": "GET",
      "description": "Obtener verduras",
      "status_code": 422,
      "expected_status": 200,
      "response_time_ms": 5.0,
      "success": false,
      "url": "http://localhost:8002/ingredientes/verduras",
      "timestamp": "2025-09-18T14:13:36.918226",
      "known_issue": {
        "description": "Rutas espec√≠ficas de ingredientes fallan (422)",
        "affected_endpoints": [
          "/ingredientes/verduras",
          "/ingredientes/carnes",
          "/ingredientes/frutas",
          "/ingredientes/low-stock"
        ],
        "cause": "FastAPI interpreta rutas espec√≠ficas como par√°metros de ruta gen√©rica",
        "solution": "Reordenar rutas: espec√≠ficas antes que gen√©ricas",
        "status": "fixed_in_code"
      },
      "response_data": {
        "detail": [
          {
            "type": "int_parsing",
            "loc": [
              "path",
              "ingrediente_id"
            ],
            "msg": "Input should be a valid integer, unable to parse string as an integer",
            "input": "verduras"
          }
        ]
      },
      "data_type": "JSON",
      "data_size": 173,
      "status": "‚ùå FALLO",
      "error": "Esperado 200, obtenido 422"
    },
    {
      "endpoint": "/ingredientes/carnes",
      "method": "GET",
      "description": "Obtener carnes",
      "status_code": 422,
      "expected_status": 200,
      "response_time_ms": 3.63,
      "success": false,
      "url": "http://localhost:8002/ingredientes/carnes",
      "timestamp": "2025-09-18T14:13:36.922856",
      "known_issue": {
        "description": "Rutas espec√≠ficas de ingredientes fallan (422)",
        "affected_endpoints": [
          "/ingredientes/verduras",
          "/ingredientes/carnes",
          "/ingredientes/frutas",
          "/ingredientes/low-stock"
        ],
        "cause": "FastAPI interpreta rutas espec√≠ficas como par√°metros de ruta gen√©rica",
        "solution": "Reordenar rutas: espec√≠ficas antes que gen√©ricas",
        "status": "fixed_in_code"
      },
      "response_data": {
        "detail": [
          {
            "type": "int_parsing",
            "loc": [
              "path",
              "ingrediente_id"
            ],
            "msg": "Input should be a valid integer, unable to parse string as an integer",
            "input": "carnes"
          }
        ]
      },
      "data_type": "JSON",
      "data_size": 171,
      "status": "‚ùå FALLO",
      "error": "Esperado 200, obtenido 422"
    },
    {
      "endpoint": "/items/",
      "method": "GET",
      "description": "Listar √≠tems",
      "status_code": 500,
      "expected_status": 200,
      "response_time_ms": 14.62,
      "success": false,
      "url": "http://localhost:8002/items/",
      "timestamp": "2025-09-18T14:13:36.938479",
      "known_issue": {
        "description": "Validaci√≥n Pydantic falla en endpoints de √≠tems (500)",
        "affected_endpoints": [
          "/items/",
          "/items/filter/price",
          "/items/filter/etiqueta/SIN_GLUTEN"
        ],
        "cause": "Campo 'tipo' faltante en entidades de dominio para DTOs",
        "solution": "Agregar campo 'tipo' din√°mico en m√©todo to_domain()",
        "status": "fixed_in_code"
      },
      "response_data": {
        "detail": "Error interno del servidor: 1 validation error for ItemResponseDTO\ntipo\n  Field required [type=missing, input_value=Bebida(id=5, descripcion=....500L, alcoholico=False), input_type=Bebida]\n    For further information visit https://errors.pydantic.dev/2.11/v/missing"
      },
      "data_type": "JSON",
      "data_size": 282,
      "status": "‚ùå FALLO",
      "error": "Esperado 200, obtenido 500"
    },
    {
      "endpoint": "/seed-data",
      "method": "POST",
      "description": "Sembrar datos",
      "status_code": 500,
      "expected_status": 200,
      "response_time_ms": 6.0,
      "success": false,
      "url": "http://localhost:8002/seed-data",
      "timestamp": "2025-09-18T14:13:36.945479",
      "known_issue": {
        "description": "Error de datos duplicados en seed-data (500)",
        "affected_endpoints": [
          "/seed-data"
        ],
        "cause": "Constraint de unicidad falla al insertar datos existentes",
        "solution": "Manejar graciosamente datos duplicados",
        "status": "fixed_in_code"
      },
      "response_data": {
        "detail": "Error al poblar la base de datos: (sqlite3.IntegrityError) UNIQUE constraint failed: ingredientes.nombre\n[SQL: INSERT INTO ingredientes (nombre, stock, peso, tipo) VALUES (?, ?, ?, ?)]\n[parameters: ('Aj√≠ Amarillo', 15.0, 0.05, 'VERDURA')]\n(Background on this error at: https://sqlalche.me/e/20/gkpj)"
      },
      "data_type": "JSON",
      "data_size": 316,
      "status": "‚ùå FALLO",
      "error": "Esperado 200, obtenido 500"
    }
  ]
}